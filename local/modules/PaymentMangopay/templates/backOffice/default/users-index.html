{extends file="mangopay.tpl"}
{default_translation_domain domain='paymentmangopay.bo.default'}

{block name="no-return-functions"}
{$admin_current_location = 'modules'}
{/block}

{block name="page-title"}Mangopay{/block}

{block name="check-resource"}admin.module{/block}
{block name="check-access"}view{/block}
{block name="check-module"}Mangopay{/block}

{block name="main-content"}
<div id="wrapper" class="container">

    {if $general_error}
    <div class="alert alert-danger">
        {$general_error}
    </div>
    {/if}

    <div class="general-block-decorator">
        {include file="includes/mangopay_menu.html" selected_menu="users"}

        <ol class="breadcrumb">
            <li class="active">{intl l='Users list' d='paymentmangopay.bo.default'}</li>
        </ol>

        <div class="btn-group pull-right">
            <a class="btn btn-primary action-btn" title="{intl l='Add natural user' d='paymentmangopay.bo.default'}" href="#naturaluser_creation_dialog" data-toggle="modal">
            <span class="glyphicon glyphicon-user" ></span> {intl l='Add natural user' d='paymentmangopay.bo.default'}
            </a>
            <a class="btn btn-primary action-btn" title="{intl l='Add legal user' d='paymentmangopay.bo.default'}" href="#legaluser_creation_dialog" data-toggle="modal">
            <span class="glyphicon glyphicon-home"></span> {intl l='Add legal user' d='paymentmangopay.bo.default'}
            </a>
        </div>

        <table class="table table-striped table-hover table-condensed">
            <tr>
                <th>#</th>
                <th>Type</th>
                <th>Email</th>
                <th>Tag</th>
                <th></th>
            </tr>
            {loop type="mangopayapiusersloop" name="mangopayapiusersloop"}
            <tr>
                <td>{$ID}</td>
                <td>{$PERSON_TYPE}</td>
                <td>{$EMAIL}</td>
                <td>{$TAG}</td>
                <td>
                    <div class="btn-group">
                        {loop name="auth-edit" type="auth" role="ADMIN" resource="admin.module" access="UPDATE" module="PaymentMangopay"}
                            {if $PERSON_TYPE eq "NATURAL"}
                            <a class="btn btn-default btn-xs mangopay-ajax-action" title="{intl l='Edit this user' d='paymentmangopay.bo.default'}"  href="{url path="/admin/module/PaymentMangopay/user/$ID/naturaluser-edit-modal"}">
                                <i class="glyphicon glyphicon-edit"></i>
                            </a>
                            {else}
                            <a class="btn btn-default btn-xs mangopay-ajax-action" title="{intl l='Edit this user' d='paymentmangopay.bo.default'}"  href="{url path="/admin/module/PaymentMangopay/user/$ID/legaluser-edit-modal"}">
                                <i class="glyphicon glyphicon-edit"></i>
                            </a>
                            {/if}

                            <a class="btn btn-default btn-xs" title="{intl l='View wallet' d='paymentmangopay.bo.default'}"  href="{url path="/admin/module/PaymentMangopay/user/$ID/view-wallet"}">
                                <i class="glyphicon glyphicon-euro"></i>
                            </a>
                        {/loop}
                        {* We can't delete user with mangopay api !!! *}
                    </div>
                </td>
            </tr>
            {/loop}
        </table>

    </div>
</div>


{/block}

